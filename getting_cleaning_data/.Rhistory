NEI <- readRDS("summarySCC_PM25.rds")
SCC <- readRDS("Source_Classification_Code.rds")
setwd("~/Documents/moocs/datasciencecoursera/exploratory_data_analysis")
NEI <- readRDS("summarySCC_PM25.rds")
SCC <- readRDS("Source_Classification_Code.rds")
length(NEI)
nrow(NEI)
for (i in 1:nrow(NEI)) {
NEI$SCC.Level.Three[i] = SCC[SCC$SCC == as.factor(NEI$SCC),"SCC.Level.Three"]
}
NEI$CoalRelated = grepl("Coal",NEI$SCC.Level.Three)
str(NEI)
str(SCC)
for (i in 1:nrow(NEI)) {
NEI$SCC.Level.Three[i] = SCC[as.character(SCC$SCC) == NEI$SCC,"SCC.Level.Three"]
}
scc_list = as.character(SCC[grepl("Coal", SCC$SCC.Level.Three),"SCC"])
filtered_set = NEI[NEI$SCC %in% scc_list,]
split_set = split(filtered_set, filtered_set$year)
tot_emissions = sapply(split_set,function(x) sum(x$Emissions))
plot(unique(NEI$year),
tot_emissions,
main="Annual Total PM2.5 Emissions from Coal Related Sources in the US",
xlab="Year",
ylab="PM2.5 Emitted [tons]")
scc_list = as.character(SCC[grepl(SCC$Short.Name %in% c("Highway Vehicles - Diesel", "Highway Vehicles - Gasoline", "Off-highway Vehicle Diesel", "Off-highway Vehicle Gasoline, 2-Stroke", "Off-highway Vehicle Gasoline, 4-Stroke")),"SCC"])
filtered_set = NEI[NEI$SCC %in% scc_list & NEI$fips=="24510",]
split_set = split(filtered_set, filtered_set$year)
tot_emissions = sapply(split_set,function(x) sum(x$Emissions))
plot(unique(NEI$year),
tot_emissions,
main="Annual Total PM2.5 Emissions from Motor Vehicles in Baltimore City, MD",
xlab="Year",
ylab="PM2.5 Emitted [tons]")
str(SCC)
SCC$Usage.Notes
levels(SCC$Usage.Notes)
str(SCC)
levels(SCC$Option.Set)
levels(SCC$SCC.Level.One)
levels(SCC$SCC.Level.Two)
scc_list = as.character(SCC[grepl(SCC$SCC.Level.Two %in% c("Highway Vehicles - Diesel", "Highway Vehicles - Gasoline", "Off-highway Vehicle Diesel", "Off-highway Vehicle Gasoline, 2-Stroke", "Off-highway Vehicle Gasoline, 4-Stroke")),"SCC"])
filtered_set = NEI[NEI$SCC %in% scc_list & NEI$fips=="24510",]
split_set = split(filtered_set, filtered_set$year)
tot_emissions = sapply(split_set,function(x) sum(x$Emissions))
scc_list = as.character(SCC[SCC$SCC.Level.Two %in% c("Highway Vehicles - Diesel", "Highway Vehicles - Gasoline", "Off-highway Vehicle Diesel", "Off-highway Vehicle Gasoline, 2-Stroke", "Off-highway Vehicle Gasoline, 4-Stroke"),"SCC"])
filtered_set = NEI[NEI$SCC %in% scc_list & NEI$fips=="24510",]
split_set = split(filtered_set, filtered_set$year)
tot_emissions = sapply(split_set,function(x) sum(x$Emissions))
levels(SCC$SCC.Level.Two)
plot(unique(NEI$year),
tot_emissions,
main="Annual Total PM2.5 Emissions from Motor Vehicles in Baltimore City, MD",
xlab="Year",
ylab="PM2.5 Emitted [tons]")
rm(list=ls())
source('~/Documents/moocs/datasciencecoursera/exploratory_data_analysis/plot5.r')
scc_list = as.character(SCC[SCC$SCC.Level.Two %in% c("Highway Vehicles - Diesel", "Highway Vehicles - Gasoline", "Off-highway Vehicle Diesel", "Off-highway Vehicle Gasoline, 2-Stroke", "Off-highway Vehicle Gasoline, 4-Stroke"),"SCC"])
filtered_set = NEI[NEI$SCC %in% scc_list & NEI$fips= %in% c("24510","06036"),]
split_set = split(filtered_set, filtered_set$fips)
split_set = lapply(split(filtered_set, filtered_set$year))
tot_emissions = sapply(split_set, function(y) sapply(y,function(x) sum(x$Emissions)))
scc_list = as.character(SCC[SCC$SCC.Level.Two %in% c("Highway Vehicles - Diesel", "Highway Vehicles - Gasoline", "Off-highway Vehicle Diesel", "Off-highway Vehicle Gasoline, 2-Stroke", "Off-highway Vehicle Gasoline, 4-Stroke"),"SCC"])
filtered_set = NEI[NEI$SCC %in% scc_list & NEI$fips %in% c("24510","06036"),]
split_set = split(filtered_set, filtered_set$fips)
split_set = lapply(split(filtered_set, filtered_set$year))
tot_emissions = sapply(split_set, function(y) sapply(y,function(x) sum(x$Emissions)))
scc_list = as.character(SCC[SCC$SCC.Level.Two %in% c("Highway Vehicles - Diesel", "Highway Vehicles - Gasoline", "Off-highway Vehicle Diesel", "Off-highway Vehicle Gasoline, 2-Stroke", "Off-highway Vehicle Gasoline, 4-Stroke"),"SCC"])
filtered_set = NEI[NEI$SCC %in% scc_list & NEI$fips %in% c("24510","06036"),]
split_set = split(filtered_set, filtered_set$fips)
split_set = lapply(split_set, split(filtered_set, filtered_set$year))
tot_emissions = sapply(split_set, function(y) sapply(y,function(x) sum(x$Emissions)))
scc_list = as.character(SCC[SCC$SCC.Level.Two %in% c("Highway Vehicles - Diesel", "Highway Vehicles - Gasoline", "Off-highway Vehicle Diesel", "Off-highway Vehicle Gasoline, 2-Stroke", "Off-highway Vehicle Gasoline, 4-Stroke"),"SCC"])
filtered_set = NEI[NEI$SCC %in% scc_list & NEI$fips %in% c("24510","06036"),]
split_set = split(filtered_set, filtered_set$fips)
split_set = lapply(split_set, function(x) split(x,x$year))
tot_emissions = sapply(split_set, function(y) sapply(y,function(x) sum(x$Emissions)))
split_set = split(filtered_set, filtered_set$fips)
str(filtered_set)
scc_list = as.character(SCC[SCC$SCC.Level.Two %in% c("Highway Vehicles - Diesel", "Highway Vehicles - Gasoline", "Off-highway Vehicle Diesel", "Off-highway Vehicle Gasoline, 2-Stroke", "Off-highway Vehicle Gasoline, 4-Stroke"),"SCC"])
filtered_set = NEI[NEI$SCC %in% scc_list & NEI$fips %in% c("24510","06036"),]
filtered_set$fips = as.factor(filtered_set$fips)
split_set = split(filtered_set, filtered_set$fips)
split_set = lapply(split_set, function(x) split(x,x$year))
tot_emissions = sapply(split_set, function(y) sapply(y,function(x) sum(x$Emissions)))
filtered_set = NEI[NEI$SCC %in% scc_list & NEI$fips %in% c("24510","06036"),]
filtered_set$fips = as.factor(filtered_set$fips)
split_set = split(filtered_set, filtered_set$fips)
scc_list = as.character(SCC[SCC$SCC.Level.Two %in% c("Highway Vehicles - Diesel", "Highway Vehicles - Gasoline", "Off-highway Vehicle Diesel", "Off-highway Vehicle Gasoline, 2-Stroke", "Off-highway Vehicle Gasoline, 4-Stroke"),"SCC"])
filtered_set = NEI[NEI$SCC %in% scc_list & NEI$fips %in% c("24510","06037"),]
filtered_set$fips = as.factor(filtered_set$fips)
split_set = split(filtered_set, filtered_set$fips)
split_set = lapply(split_set, function(x) split(x,x$year))
tot_emissions = sapply(split_set, function(y) sapply(y,function(x) sum(x$Emissions)))
?transpose
?reshape
?legend
?points
levels(filtered_set$fips)
?legend
plot(unique(NEI$year),
tot_emissions[,1],
main="Annual Total PM2.5 Emissions from Motor Vehicles",
xlab="Year",
ylab="PM2.5 Emitted [tons]"
col = "red",
pch = "19")
plot(unique(NEI$year),
tot_emissions[,1],
main="Annual Total PM2.5 Emissions from Motor Vehicles",
xlab="Year",
ylab="PM2.5 Emitted [tons]"
col = "red",
pch = 19)
plot(unique(NEI$year),
tot_emissions[,1],
main="Annual Total PM2.5 Emissions from Motor Vehicles",
xlab="Year",
ylab="PM2.5 Emitted [tons]",
col = "red",
pch = 19)
plot(unique(NEI$year),
tot_emissions[,1],
main="Annual Total PM2.5 Emissions from Motor Vehicles",
xlab="Year",
ylab="PM2.5 Emitted [tons]"
col = "red",
pch = 19)
points(unique(NEI$year),
tot_emissions[,2],
col = "green"
pch = 19)
legend(
"topright"
pch = 19
legend = c("Baltimor City","Los Angelas County")
)
plot(unique(NEI$year),
tot_emissions[,1],
main="Annual Total PM2.5 Emissions from Motor Vehicles",
xlab="Year",
ylab="PM2.5 Emitted [tons]"
col = "red",
pch = 19)
points(unique(NEI$year),
tot_emissions[,2],
col = "green",
pch = 19)
legend(
"topright",
pch = 19,
legend = c("Baltimore City","Los Angelas County")
)
points(unique(NEI$year),
tot_emissions[,2],
col = "green",
pch = 19)
?plot
?xlim
View(tot_emissions)
plot.window(xlim =c(1999,2009), ylim = c(0,7400))
plot.window(xlim =c(1999,2009), ylim = c(0,7400))
plot(unique(NEI$year),
tot_emissions[,1],
main="Annual Total PM2.5 Emissions from Motor Vehicles",
xlab="Year",
ylab="PM2.5 Emitted [tons]"
col = "red",
pch = 19,
xlim)
points(unique(NEI$year),
tot_emissions[,2],
col = "green",
pch = 19)
legend(
"topright",
pch = 19,
legend = c("Baltimore City","Los Angelas County")
col = c("green","red")
)
dev.off()
plot.window(xlim =c(1999,2009), ylim = c(0,7400))
plot(unique(NEI$year),
tot_emissions[,1],
main="Annual Total PM2.5 Emissions from Motor Vehicles",
xlab="Year",
ylab="PM2.5 Emitted [tons]",
col = "red",
pch = 19,
xlim)
points(unique(NEI$year),
tot_emissions[,2],
col = "green",
pch = 19)
legend(
"topright",
pch = 19,
legend = c("Baltimore City","Los Angelas County")
col = c("green","red")
)
plot.window(xlim =c(1999,2009), ylim = c(0,7400))
plot(unique(NEI$year),
tot_emissions[,1],
main="Annual Total PM2.5 Emissions from Motor Vehicles",
xlab="Year",
ylab="PM2.5 Emitted [tons]",
col = "red",
pch = 19,
xlim)
points(unique(NEI$year),
tot_emissions[,2],
col = "green",
pch = 19)
legend(
"topright",
pch = 19,
legend = c("Baltimore City","Los Angelas County"),
col = c("green","red")
)
plot.window(xlim =c(1999,2009), ylim = c(0,7400))
plot(unique(NEI$year),
tot_emissions[,1],
main="Annual Total PM2.5 Emissions from Motor Vehicles",
xlab="Year",
ylab="PM2.5 Emitted [tons]",
col = "red",
pch = 19)
points(unique(NEI$year),
tot_emissions[,2],
col = "green",
pch = 19)
legend(
"topright",
pch = 19,
legend = c("Baltimore City","Los Angelas County"),
col = c("green","red")
)
?plot
dev.off()
plot.defaulf(unique(NEI$year),
tot_emissions[,1],
main="Annual Total PM2.5 Emissions from Motor Vehicles",
xlab="Year",
ylab="PM2.5 Emitted [tons]",
col = "red",
pch = 19,
xlim =c(1999,2009),
ylim = c(0,7400))
points(unique(NEI$year),
tot_emissions[,2],
col = "green",
pch = 19)
legend(
"topright",
pch = 19,
legend = c("Baltimore City","Los Angelas County"),
col = c("green","red")
)
plot.default(unique(NEI$year),
tot_emissions[,1],
main="Annual Total PM2.5 Emissions from Motor Vehicles",
xlab="Year",
ylab="PM2.5 Emitted [tons]",
col = "red",
pch = 19,
xlim =c(1999,2009),
ylim = c(0,7400))
points(unique(NEI$year),
tot_emissions[,2],
col = "green",
pch = 19)
legend(
"topright",
pch = 19,
legend = c("Baltimore City","Los Angelas County"),
col = c("green","red")
)
plot.default(unique(NEI$year),
tot_emissions[,1],
main="Annual Total PM2.5 Emissions from Motor Vehicles",
xlab="Year",
ylab="PM2.5 Emitted [tons]",
col = "red",
pch = 19,
xlim =c(1999,2009),
ylim = c(0,8000))
points(unique(NEI$year),
tot_emissions[,2],
col = "green",
pch = 19)
legend(
"topright",
pch = 19,
legend = c("Baltimore City","Los Angelas County"),
col = c("green","red")
)
dev.off()
plot.default(unique(NEI$year),
tot_emissions[,1],
main="Annual Total PM2.5 Emissions from Motor Vehicles",
xlab="Year",
ylab="PM2.5 Emitted [tons]",
col = "red",
pch = 19,
xlim =c(1999,2009),
ylim = c(0,8500))
points(unique(NEI$year),
tot_emissions[,2],
col = "green",
pch = 19)
legend(
"topright",
pch = 19,
legend = c("Baltimore City","Los Angelas County"),
col = c("green","red")
)
rm(list=ls())
source('~/Documents/moocs/datasciencecoursera/exploratory_data_analysis/plot6.r')
rm(list=ls())
source('~/Documents/moocs/datasciencecoursera/getting_cleaning_data/run_analysis.r')
setwd("~/Documents/moocs/datasciencecoursera/getting_cleaning_data")
source('~/Documents/moocs/datasciencecoursera/getting_cleaning_data/run_analysis.r')
source('~/Documents/moocs/datasciencecoursera/getting_cleaning_data/run_analysis.r')
View(split_avg)
?order
?sort
str(split_avg)
split_avg$subject = as.numeric(split_avg$subject)
str(split_avg)
split_avg$subject = as.integer(split_avg$subject)
str(split_avg)
sorted = order(split_avg$activity,split_avg$subject)
split_avg = split_avg[sorted,]
View(split_avg)
source('~/Documents/moocs/datasciencecoursera/getting_cleaning_data/run_analysis.r')
split_avg = split_avg[order(split_avg$activity,split_avg$subject),]
rownames(split_avg) = 1:180
View(split_avg)
source('~/Documents/moocs/datasciencecoursera/getting_cleaning_data/run_analysis.r')
View(split_avg)
source('~/Documents/moocs/datasciencecoursera/getting_cleaning_data/run_analysis.r')
View(split_avg)
?write.table
write.table(split_avg, file = "subject_activity_avg.txt", row.names=F)
?read
?read.data
?read.data.frame
?read
?read.table
split_new = read.table("subject_activity_avg.txt")
View(split_new)
split_new = read.table("subject_activity_avg.txt",header=T)
View(split_new)
View(split_avg)
rm(list=ls())
gc()
gc()
